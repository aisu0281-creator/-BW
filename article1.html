<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ç·å½“ãŸã‚Šæˆ¦çµæœ</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      background-color: #f5f5f5;
    }
    .container {
      max-width: 1000px;
      margin: 0 auto;
      background-color: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    h1 {
      text-align: center;
      color: #333;
      margin-bottom: 30px;
      font-size: 2em;
    }
    .section { margin-bottom: 40px; }
    .section h2 {
      background-color: #4CAF50;
      color: white;
      padding: 10px;
      margin: 0 0 15px 0;
      border-radius: 5px;
    }
    table {
      border-collapse: collapse;
      margin: 10px 0;
      width: 100%;
    }
    th, td {
      border: 1px solid #ddd;
      padding: 10px;
      text-align: center;
      cursor: pointer;
    }
    th {
      background-color: #f2f2f2;
      font-weight: bold;
    }
    .match-table th, .match-table td:first-child {
      background-color: #e8f5e8;
      font-weight: bold;
    }
    .results-grid th:first-child, .results-grid td:first-child {
      background-color: #f2f2f2;
      cursor: default;
    }
    .gray { background-color: #d3d3d3 !important; cursor: default; }
    .lightblue { background-color: #add8e6 !important; }
    .red { background-color: #ff6347 !important; }
    .yellow { background-color: #ffff99 !important; }
    .orange { background-color: #ffa500 !important; }
    .green { background-color: #90ee90 !important; }

    .participant-list {
      display: flex;
      gap: 20px;
      flex-wrap: wrap;
    }
    .participant-box {
      border: 1px solid #ddd;
      padding: 10px;
      border-radius: 5px;
      text-align: center;
      font-weight: bold;
      min-width: 100px;
    }
    .participant-box.royal { background-color: #add8e6; }
    .participant-box.nightmare { background-color: #ffff00; }
    .participant-box.highlander { background-color: #ffa500; }
    .participant-box.witch { background-color: #ade6b2; }
    .participant-box.bishop { background-color: #ff6347; }

    .note {
      margin-top: 20px;
      padding: 10px;
      background-color: #e0f2f1;
      border-left: 5px solid #009688;
    }

    /* å¯¾æˆ¦ã‚«ãƒ¼ãƒ‰ã ã‘ã‚°ãƒ¬ãƒ¼ã‚¢ã‚¦ãƒˆ */
    .finished-card {
      background-color: #eee !important;
      color: #888;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ® ç·å½“ãŸã‚Šæˆ¦çµæœ</h1>

    <div class="section">
      <h2>ğŸ‘¥ å‚åŠ è€…ã¨ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼</h2>
      <div class="participant-list">
        <div class="participant-box royal"><p><strong>1: S.K</strong></p><p>ãƒ­ã‚¤ãƒ¤ãƒ«</p></div>
        <div class="participant-box nightmare"><p><strong>2: H.K</strong></p><p>ãƒŠã‚¤ãƒˆãƒ¡ã‚¢</p></div>
        <div class="participant-box highlander"><p><strong>3: S.R</strong></p><p>ãƒã‚¤ãƒ©ãƒ³ãƒ€ãƒ¼</p></div>
        <div class="participant-box witch"><p><strong>4: S.N</strong></p><p>ã‚¦ã‚£ãƒƒãƒ</p></div>
        <div class="participant-box bishop"><p><strong>5: N.T</strong></p><p>ãƒ“ã‚·ãƒ§ãƒƒãƒ—</p></div>
      </div>
    </div>

    <div class="section">
      <h2>ğŸ† å¯¾æˆ¦è¡¨</h2>
      <table class="match-table" id="matchTable">
        <thead><tr><th>è©¦åˆç•ªå·</th><th>å¯¾æˆ¦ã‚«ãƒ¼ãƒ‰</th></tr></thead>
        <tbody>
          <tr><td>ç¬¬1è©¦åˆ</td><td>2 vs 5</td></tr>
          <tr><td>ç¬¬2è©¦åˆ</td><td>3 vs 4</td></tr>
          <tr><td>ç¬¬3è©¦åˆ</td><td>1 vs 5</td></tr>
          <tr><td>ç¬¬4è©¦åˆ</td><td>2 vs 3</td></tr>
          <tr><td>ç¬¬5è©¦åˆ</td><td>1 vs 4</td></tr>
          <tr><td>ç¬¬6è©¦åˆ</td><td>5 vs 2</td></tr>
          <tr><td>ç¬¬7è©¦åˆ</td><td>1 vs 3</td></tr>
          <tr><td>ç¬¬8è©¦åˆ</td><td>4 vs 2</td></tr>
          <tr><td>ç¬¬9è©¦åˆ</td><td>1 vs 2</td></tr>
          <tr><td>ç¬¬10è©¦åˆ</td><td>4 vs 5</td></tr>
        </tbody>
      </table>
    </div>

    <div class="section">
      <h2>ğŸ“ çµæœã‚°ãƒªãƒƒãƒ‰</h2>
      <table class="results-grid" id="resultsGrid">
        <thead>
          <tr><th></th><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th></tr>
        </thead>
        <tbody>
          <tr><th>1</th><td class="gray"></td><td></td><td></td><td></td><td></td></tr>
          <tr><th>2</th><td></td><td class="gray"></td><td></td><td></td><td></td></tr>
          <tr><th>3</th><td></td><td></td><td class="gray"></td><td></td><td></td></tr>
          <tr><th>4</th><td></td><td></td><td></td><td class="gray"></td><td></td></tr>
          <tr><th>5</th><td></td><td></td><td></td><td></td><td class="gray"></td></tr>
        </tbody>
      </table>
      <div class="note">
        <p><strong>å‡¡ä¾‹:</strong></p>
        <ul>
          <li>ã‚»ãƒ«ã‚’ã‚¯ãƒªãƒƒã‚¯ â†’ ã€Œã€‡ â†’ Ã— â†’ ç©ºç™½ã€ã§åˆ‡æ›¿</li>
          <li>èƒŒæ™¯è‰²ã¯ç›¸æ‰‹ã‚­ãƒ£ãƒ©è‰²ã«å¯¾å¿œ</li>
          <li>çµ‚ã‚ã£ãŸè©¦åˆã¯å¯¾æˆ¦è¡¨ãŒè‡ªå‹•ã§ã‚°ãƒ¬ãƒ¼ã‚¢ã‚¦ãƒˆ</li>
          <li>å‹åˆ©æ•°ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚‚ä¸‹ã«è‡ªå‹•è¡¨ç¤º</li>
        </ul>
      </div>
    </div>

    <div class="section">
      <h2>ğŸ¥‡ å‹åˆ©æ•°ãƒ©ãƒ³ã‚­ãƒ³ã‚°</h2>
      <table id="rankingTable">
        <thead>
          <tr><th>é †ä½</th><th>å‚åŠ è€…</th><th>ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼</th><th>å‹åˆ©æ•°</th></tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>

    <div style="text-align: center; margin-top: 30px; color: #666; border-top: 1px solid #ddd; padding-top: 20px;">
      <p>æœ€çµ‚æ›´æ–°: 2025å¹´9æœˆ10æ—¥</p>
    </div>
  </div>

  <script>
    // ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã”ã¨ã®è‰²ãƒãƒƒãƒ—
    const colors = {
      1: "lightblue",  // ãƒ­ã‚¤ãƒ¤ãƒ«
      2: "yellow",     // ãƒŠã‚¤ãƒˆãƒ¡ã‚¢
      3: "orange",     // ãƒã‚¤ãƒ©ãƒ³ãƒ€ãƒ¼
      4: "green",      // ã‚¦ã‚£ãƒƒãƒ
      5: "red"         // ãƒ“ã‚·ãƒ§ãƒƒãƒ—
    };

    // ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼æƒ…å ±
    const players = {
      1: { name: "S.K", char: "ãƒ­ã‚¤ãƒ¤ãƒ«" },
      2: { name: "H.K", char: "ãƒŠã‚¤ãƒˆãƒ¡ã‚¢" },
      3: { name: "S.R", char: "ãƒã‚¤ãƒ©ãƒ³ãƒ€ãƒ¼" },
      4: { name: "S.N", char: "ã‚¦ã‚£ãƒƒãƒ" },
      5: { name: "N.T", char: "ãƒ“ã‚·ãƒ§ãƒƒãƒ—" }
    };

    // å¯¾æˆ¦è¡¨æ›´æ–°
    function updateFinishedMatches() {
      const results = document.querySelectorAll("#resultsGrid tbody tr");
      const matchRows = document.querySelectorAll("#matchTable tbody tr");

      matchRows.forEach(row => {
        const matchText = row.cells[1].textContent.trim();
        const [p1, p2] = matchText.split(" vs ").map(Number);

        let cell1 = results[p1 - 1].querySelectorAll("td")[p2 - 1];
        let cell2 = results[p2 - 1].querySelectorAll("td")[p1 - 1];

        if ((cell1 && (cell1.textContent === "ã€‡" || cell1.textContent === "Ã—")) ||
            (cell2 && (cell2.textContent === "ã€‡" || cell2.textContent === "Ã—"))) {
          row.cells[1].classList.add("finished-card");
        } else {
          row.cells[1].classList.remove("finished-card");
        }
      });
    }

    // å‹åˆ©æ•°ãƒ©ãƒ³ã‚­ãƒ³ã‚°æ›´æ–°
    function updateRanking() {
      const grid = document.getElementById("resultsGrid");
      const rows = grid.querySelectorAll("tbody tr");

      // å‹åˆ©æ•°ã‚«ã‚¦ãƒ³ãƒˆ
      let wins = {1:0,2:0,3:0,4:0,5:0};
      rows.forEach((row, i) => {
        const player = i + 1;
        row.querySelectorAll("td").forEach((cell, j) => {
          if (player === j+1) return;
          if (cell.textContent === "ã€‡") {
            wins[player]++;
          }
        });
      });

      // ã‚½ãƒ¼ãƒˆï¼ˆå‹åˆ©æ•°é™é †ï¼‰
      let ranking = Object.entries(wins).sort((a,b) => b[1] - a[1]);

      const tbody = document.querySelector("#rankingTable tbody");
      tbody.innerHTML = "";
      let lastWins = null, rank = 0, displayRank = 0;
      ranking.forEach(([player, win]) => {
        rank++;
        if (win !== lastWins) {
          displayRank = rank;
        }
        lastWins = win;

        let tr = document.createElement("tr");
        tr.innerHTML = `<td>${displayRank}</td>
                        <td>${players[player].name}</td>
                        <td>${players[player].char}</td>
                        <td>${win}</td>`;
        tbody.appendChild(tr);
      });
    }

    function setupGrid() {
      const grid = document.getElementById("resultsGrid");
      grid.querySelectorAll("tbody tr").forEach((row, i) => {
        const rowPlayer = i + 1;
        row.querySelectorAll("td").forEach((cell, j) => {
          const colPlayer = j + 1;
          if (rowPlayer === colPlayer) return; // è‡ªåˆ†å¯¾è‡ªåˆ†ã¯ã‚¹ã‚­ãƒƒãƒ—

          cell.addEventListener("click", () => {
            // å‹æ•—ã‚’åˆ‡æ›¿
            if (cell.textContent === "") {
              cell.textContent = "ã€‡";
            } else if (cell.textContent === "ã€‡") {
              cell.textContent = "Ã—";
            } else {
              cell.textContent = "";
            }

            // èƒŒæ™¯è‰²ãƒªã‚»ãƒƒãƒˆ
            cell.className = "";
            if (cell.textContent !== "") {
              cell.classList.add(colors[colPlayer]);
            }

            updateFinishedMatches();
            updateRanking();
          });
        });
      });
    }

    document.addEventListener("DOMContentLoaded", () => {
      setupGrid();
      updateFinishedMatches();
      updateRanking();
    });
  </script>
</body>
</html>
